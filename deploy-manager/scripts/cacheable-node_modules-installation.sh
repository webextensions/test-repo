#!/bin/bash

# cd to the folder containing this script
cd "$(dirname "$0")"

STAKEHOLDERS_HASH=$(node ./cacheable-node_modules-installation/generateHashFromStakeholders.js)

# cd to the project's root folder
cd ../..

if [ ! -f "node_modules-archived/"$STAKEHOLDERS_HASH".tar.gz" ]; then
    echo "File does not exist."
else
    echo "File already exists."
fi

# use-node_modules-archive-or-npm-ci-or-npm-install-no-package-lock


# var hash = generateHash('.nvmrc', 'package.json', 'package-lock.json');

# if (backupWithHashExists(hash)) {
#     restoreNode_ModulesFromBackup(hash);
# } else {
#     if (exists("package-lock.json")) {
#         if (inSync('package-lock.json', 'package.json')) {
#             try {
#                 run("npm ci");
#                 backupIfRequired('node_modules');
#             } catch (e) {
#                 run("npm install --no-package-lock");
#                 backupIfRequired('node_modules');
#             }
#         } else {
#             console.warn('Warning: Your package-lock.json is out of sync with package.json');
#             try {
#                 run("npm install --no-package-lock");
#                 backupIfRequired('node_modules');
#             } catch (e) {
#                 run("npm ci");
#                 backupIfRequired('node_modules');
#             }
#         }
#     } else {
#         run("npm install --no-package-lock");
#         backupIfRequired('node_modules');
#     }
# }
